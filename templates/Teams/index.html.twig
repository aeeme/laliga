{% extends 'base.html.twig' %}

{% block body %}
    <h1> Equipos </h1>
    <h2> Crea tu equipo </h2>
    <form id="create-team-form">
        <label for="nombre">Nombre: </label>
        <input type="text" id="nombre" name="nombre" maxlength="100" required> <br><br>
        <label for="presupuesto_actual">Presupuesto: </label>
        <input type="number" id="presupuesto_actual" name="presupuesto_actual" min="0" required><br><br>
        <button type="reset">Borrar</button>
        <button type="submit">Crear equipo</button>
    </form><br><br>

    <h2> Elimina un equipo existente </h2>
    <form id="delete-team-form">
        <label for="delete-team-id">ID del equipo:</label>
        <input type="number" id="delete-team-id" name="delete-team-id" min="1" required><br><br>
        <button type="submit">Eliminar equipo</button>
    </form><br><br>

    <h2> Actualiza un equipo existente</h2>
    <form id="update-team-form">
        <label for="update-team-id">ID del equipo:</label>
        <input type="number" id="update-team-id" name="update-team-id" min="1" required><br><br>
        <label for="update-team-nombre">Nuevo nombre</label>
        <input type="text" id="update-team-nombre" name="update-team-nombre" maxlength="100"><br><br>
        <label for="update-team-presupuesto">Nuevo presupuesto:</label>
        <input type="number" id="update-team-presupuesto" name="update-team-presupuesto" min="0"><br><br>
        <button type="reset">Borrar</button>
        <button type="submit">Actualizar equipo</button>
    </form>

    <script>
        document.getElementById('create-team-form').addEventListener('submit', function(event){
            event.preventDefault();

            const data = {
                nombre: document.getElementById('nombre').value,
                presupuesto_actual: document.getElementById('presupuesto_actual').value
            };

            fetch('/teams', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert('Team created successfully!');
            })
            .catch((error) => {
                console.error('Error', error);
                alert('Error creating team!');
            });
        });
    </script>

{% endblock %}