{% extends 'base.html.twig' %}

{% block body %}
    <h1> Equipos </h1>
    <h2> Crea tu equipo </h2>
    <form id="create-team-form">
        <label for="nombre">Nombre: </label>
        <input type="text" id="nombre" name="nombre" required> <br><br>
        <label for="presupuesto_actual">Presupuesto: </label>
        <input type="number" id="presupuesto_actual" name="presupuesto_actual" min="0" required><br><br>
        <button type="reset">Borrar</button>
        <button type="submit">Crear equipo</button>
    </form>

    <script>
        document.getElementById('create-team-form').addEventListener('submit', function(event){
            event.preventDefault();

            const data = {
                nombre: document.getElementById('nombre').value,
                presupuesto_actual: document.getElementById('presupuesto_actual').value
            };

            fetch('/teams', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert('Team created successfully!');
            })
            .catch((error) => {
                console.error('Error', error);
                alert('Error creating team!');
            });
        });
    </script>

{% endblock %}